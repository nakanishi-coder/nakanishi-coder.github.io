:root{--primary-color: #3b82f6;--secondary-color: #8b5cf6;--success-color: #10b981;--danger-color: #ef4444;--warning-color: #f59e0b;--background-color: #f8fafc;--surface-color: #ffffff;--text-color: #1f2937;--text-muted: #6b7280;--border-color: #e5e7eb;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: 1rem;--spacing-lg: 1.5rem;--spacing-xl: 2rem;--spacing-2xl: 3rem;--border-radius: .5rem;--border-radius-lg: 1rem;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:Segoe UI,system-ui,-apple-system,sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--background-color);font-size:16px}#app{min-height:100vh;display:flex;flex-direction:column}.app-header{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;padding:var(--spacing-xl);text-align:center;box-shadow:var(--shadow-md)}.app-header h1{font-size:2.5rem;margin-bottom:var(--spacing-sm);font-weight:700}.app-header p{font-size:1.125rem;opacity:.9}.app-main{flex:1;padding:var(--spacing-xl);max-width:1200px;margin:0 auto;width:100%}section{background:var(--surface-color);border-radius:var(--border-radius-lg);padding:var(--spacing-xl);margin-bottom:var(--spacing-xl);box-shadow:var(--shadow-sm);border:1px solid var(--border-color)}section h3{font-size:1.5rem;margin-bottom:var(--spacing-lg);color:var(--text-color);font-weight:600}.recording-controls{display:flex;align-items:center;gap:var(--spacing-md);justify-content:center;flex-wrap:wrap;margin-bottom:var(--spacing-lg)}.recording-controls.grid-layout{display:grid;justify-content:stretch;align-items:center}.recording-controls label{font-weight:500;color:var(--text-color)}.recording-controls select{padding:var(--spacing-sm) var(--spacing-md);border:2px solid var(--border-color);border-radius:var(--border-radius);font-size:1rem;background:var(--surface-color);color:var(--text-color);min-height:40px;touch-action:manipulation;cursor:pointer}.record-button{background:var(--success-color);color:#fff;border:none;padding:var(--spacing-md) var(--spacing-xl);border-radius:var(--border-radius);font-size:1.125rem;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:var(--shadow-sm);min-height:40px;touch-action:manipulation;-webkit-user-select:none;user-select:none}.record-button:hover{background:#059669;transform:translateY(-1px);box-shadow:var(--shadow-md)}.record-button:active{transform:translateY(0)}.record-button:disabled{background:var(--text-muted);cursor:not-allowed;transform:none}.record-button.recording{background:linear-gradient(45deg,#ef4444,#dc2626);animation:recording-pulse 1s infinite;border:3px solid #fef2f2;box-shadow:0 0 20px #ef444480}.record-button.countdown{background:linear-gradient(45deg,#f59e0b,#d97706);animation:countdown-ready .5s ease-in-out;transform:scale(1.1)}@keyframes pulse{0%,to{opacity:1}50%{opacity:.7}}@keyframes recording-pulse{0%,to{transform:scale(1);box-shadow:0 0 20px #ef444480}50%{transform:scale(1.05);box-shadow:0 0 30px #ef4444cc}}@keyframes countdown-ready{0%{transform:scale(1)}50%{transform:scale(1.15)}to{transform:scale(1.1)}}.recording-status{text-align:center;font-weight:500;min-height:1.5rem}.recording-status.active{background:linear-gradient(135deg,#ef4444,#dc2626);animation:recording-glow 1s infinite;border:2px solid rgba(239,68,68,.3)}.recording-status.countdown{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;font-size:1.25rem;font-weight:700;animation:status-glow 1s infinite}.charts-container{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);margin-bottom:var(--spacing-xl)}.chart-wrapper{background:var(--background-color);padding:var(--spacing-lg);border-radius:var(--border-radius);border:1px solid var(--border-color)}.chart-wrapper h3{margin-bottom:var(--spacing-md);font-size:1.25rem;text-align:center}.chart-wrapper canvas{width:100%!important;height:300px!important;max-height:300px;cursor:grab}.chart-wrapper canvas:active{cursor:grabbing}.chart-info{margin-top:var(--spacing-sm);text-align:center}.chart-info p{color:var(--text-muted);font-size:.875rem}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-lg)}.metric-item{background:var(--background-color);padding:var(--spacing-lg);border-radius:var(--border-radius);text-align:center;border:1px solid var(--border-color)}.metric-item label{display:block;font-weight:500;color:var(--text-muted);margin-bottom:var(--spacing-xs);font-size:.875rem}.metric-item span{font-size:1.5rem;font-weight:700;color:var(--primary-color)}.comparison-controls{display:flex;gap:var(--spacing-md);justify-content:center;margin-bottom:var(--spacing-lg);flex-wrap:wrap}.comparison-chart-container canvas{width:100%!important;height:200px!important;max-height:200px;display:block}.comparison-button,.export-button{background:var(--primary-color);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--border-radius);font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;min-height:40px;touch-action:manipulation;-webkit-user-select:none;user-select:none}.comparison-button:hover,.export-button:hover{background:#2563eb;transform:translateY(-1px)}.comparison-button:disabled,.export-button:disabled{background:var(--text-muted);cursor:not-allowed;transform:none}.comparison-charts{display:grid;gap:var(--spacing-lg)}.comparison-item{background:var(--background-color);padding:var(--spacing-lg);border-radius:var(--border-radius);border:1px solid var(--border-color)}.export-section{text-align:center}.export-controls{display:flex;align-items:center;gap:var(--spacing-md);justify-content:center;margin-bottom:var(--spacing-lg);flex-wrap:wrap}.export-controls label{font-weight:500;color:var(--text-color)}.export-controls select{padding:var(--spacing-sm) var(--spacing-md);border:2px solid var(--border-color);border-radius:var(--border-radius);font-size:1rem;background:var(--surface-color);color:var(--text-color);min-width:180px}.export-button{background:var(--secondary-color)}.export-button:hover{background:#7c3aed}.export-info{background:var(--background-color);padding:var(--spacing-lg);border-radius:var(--border-radius);border:1px solid var(--border-color);text-align:left;max-width:600px;margin:0 auto}.export-info p{margin-bottom:var(--spacing-sm);font-size:.875rem;color:var(--text-muted)}.export-info p:last-child{margin-bottom:0}.export-info strong{color:var(--text-color)}.debug-section{border:2px dashed var(--warning-color);background:#fffbeb}.debug-controls{display:flex;gap:var(--spacing-md);justify-content:center;margin-bottom:var(--spacing-lg);flex-wrap:wrap}.debug-info{background:var(--background-color);padding:var(--spacing-lg);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:Courier New,monospace;font-size:.875rem;display:none}.debug-info h4{margin-bottom:var(--spacing-md);color:var(--text-color)}.debug-info ul{margin-left:var(--spacing-lg)}.debug-info li{margin-bottom:var(--spacing-xs)}.countdown-display{display:none;text-align:center;margin:1.5rem 0;padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:1rem;color:#fff;box-shadow:var(--shadow-lg);animation:pulse 1s infinite}.countdown-display.active{display:block}.countdown-number{font-size:4rem;font-weight:700;margin-bottom:.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3);animation:countdown-bounce 1s ease-in-out}.countdown-message{font-size:1.5rem;font-weight:500;opacity:.9}@keyframes countdown-bounce{0%{transform:scale(.3);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.recording-controls .comparison-button{margin-left:var(--spacing-sm)}.marker-info{margin-top:var(--spacing-sm);padding:var(--spacing-sm);background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border-radius:var(--border-radius);font-size:.9rem;text-align:center;box-shadow:var(--shadow-sm)}.marker-info strong{font-weight:600}.mode-section{background:var(--surface-color);padding:var(--spacing-lg);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm);margin-bottom:var(--spacing-xl);border:1px solid var(--border-color)}.mode-controls{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg);max-width:800px;margin:0 auto}.mode-label{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg);border:2px solid var(--border-color);border-radius:var(--border-radius);cursor:pointer;transition:all .2s ease;background:var(--surface-color);text-align:center}.mode-label:hover{border-color:var(--primary-color);background:#3b82f60d;transform:translateY(-2px);box-shadow:var(--shadow-md)}.mode-label input[type=radio]{margin:0 var(--spacing-sm) var(--spacing-sm) 0;accent-color:var(--primary-color);transform:scale(1.2)}.mode-label:has(input[type=radio]:checked){border-color:var(--primary-color);background:#3b82f61a;box-shadow:var(--shadow-md)}.mode-description{font-size:.875rem;color:var(--text-muted);margin-top:var(--spacing-xs);font-style:italic}.beta-badge{background:var(--warning-color);color:#fff;font-size:.75rem;padding:.125rem .375rem;border-radius:.25rem;font-weight:600;margin-left:var(--spacing-xs);font-style:normal}.realtime-section{padding:var(--spacing-lg);background:var(--surface-color);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-md);margin-bottom:var(--spacing-xl);display:none}.realtime-controls{display:flex;flex-wrap:wrap;gap:var(--spacing-md);align-items:center;margin-bottom:var(--spacing-lg)}.realtime-controls label{font-weight:600;color:var(--text-color);white-space:nowrap}.realtime-controls select{padding:var(--spacing-sm) var(--spacing-md);border:2px solid var(--border-color);border-radius:var(--border-radius);background:var(--surface-color);font-size:.9rem;transition:border-color .3s ease;min-height:40px;touch-action:manipulation;cursor:pointer}.realtime-controls select:focus{outline:none;border-color:var(--primary-color)}.realtime-button{padding:var(--spacing-md) var(--spacing-lg);font-size:1rem;font-weight:600;border:none;border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;min-width:120px;min-height:40px;touch-action:manipulation;-webkit-user-select:none;user-select:none}.realtime-button.start{background:var(--danger-color);color:#fff}.realtime-button.start:hover:not(:disabled){background:#dc2626;transform:translateY(-2px);box-shadow:0 4px 12px #ef444466}.realtime-button.stop{background:var(--text-muted);color:#fff}.realtime-button.stop:hover:not(:disabled){background:#4b5563;transform:translateY(-2px);box-shadow:0 4px 12px #4b556366}.realtime-button:disabled{opacity:.6;cursor:not-allowed;transform:none}.realtime-status{padding:var(--spacing-md);background:#f3f4f6;border-radius:var(--border-radius);font-size:.9rem;color:var(--text-muted);border-left:4px solid var(--border-color)}.realtime-status.active{background:#dcfce7;color:var(--success-color);border-left-color:var(--success-color)}.realtime-status.error{background:#fef2f2;color:var(--danger-color);border-left-color:var(--danger-color)}.realtime-status.info{background:#eff6ff;color:var(--primary-color);border-left-color:var(--primary-color)}.app-main[data-mode=realtime] .recording-section{display:none!important}.app-main[data-mode=realtime] .realtime-section{display:block!important}.app-main[data-mode=recording] .realtime-section{display:none!important}.app-main[data-mode=recording] .recording-section{display:block!important}.chart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.zoom-reset-btn{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;border:none;padding:6px 12px;border-radius:var(--border-radius);cursor:pointer;font-size:12px;font-weight:600;transition:all .2s ease;box-shadow:var(--shadow-sm)}.zoom-reset-btn:hover{background:linear-gradient(135deg,#4f46e5,#7c3aed);transform:translateY(-1px);box-shadow:var(--shadow-md)}.zoom-reset-btn:active{transform:translateY(0);box-shadow:var(--shadow-sm)}.zoom-help{font-size:12px;color:var(--text-muted);margin-top:var(--spacing-xs);font-style:italic}:root{--tablet-spacing: 1.5rem;--tablet-button-height: 48px;--tablet-font-size: 18px;--tablet-touch-target: 44px}@media (max-width: 767px){body{font-size:14px}.app-header h1{font-size:1.5rem}.chart-header{flex-direction:column;align-items:flex-start;gap:var(--spacing-xs)}.zoom-reset-btn{align-self:flex-end;font-size:11px;padding:4px 8px}.zoom-help{font-size:11px}.recording-controls,.realtime-controls{flex-direction:column;gap:var(--spacing-sm)}}@media (min-width: 768px) and (max-width: 1023px){body{font-size:var(--tablet-font-size)}.app-header{padding:var(--tablet-spacing)}.app-header h1{font-size:2rem}.app-main{padding:var(--tablet-spacing);gap:var(--tablet-spacing)}.recording-controls{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto auto auto;gap:var(--spacing-md);align-items:center;grid-template-areas:"duration-label    fft-label" "duration-select   fft-select" "record-btn        record-btn" "save-btn          export-btn"}.realtime-controls{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto auto auto auto;gap:var(--spacing-md);align-items:center;grid-template-areas:"fft-label-rt      fft-label-rt" "fft-select-rt     fft-select-rt" "start-btn         stop-btn" "save-rt-btn       save-rt-btn"}.recording-controls label[for=duration-select]{grid-area:duration-label;justify-self:start}.recording-controls label[for=fft-resolution-select]{grid-area:fft-label;justify-self:start}.recording-controls #duration-select{grid-area:duration-select}.recording-controls #fft-resolution-select{grid-area:fft-select}.recording-controls #record-btn{grid-area:record-btn}.recording-controls #save-for-comparison{grid-area:save-btn}.recording-controls .export-button{grid-area:export-btn}.realtime-controls label[for=fft-resolution-select-realtime]{grid-area:fft-label-rt;justify-self:center}.realtime-controls #fft-resolution-select-realtime{grid-area:fft-select-rt}.realtime-controls #realtime-start-btn{grid-area:start-btn}.realtime-controls #realtime-stop-btn{grid-area:stop-btn}.realtime-controls #realtime-save-comparison{grid-area:save-rt-btn}.recording-controls label,.realtime-controls label{font-weight:600;font-size:1rem}.recording-controls select,.realtime-controls select{min-height:var(--tablet-touch-target);font-size:1rem;padding:var(--spacing-sm)}.record-button,.realtime-button{min-height:var(--tablet-button-height);font-size:1.1rem;padding:var(--spacing-md) var(--tablet-spacing);grid-column:1 / -1}.recording-controls #record-btn{min-height:var(--tablet-button-height)!important;font-size:1.1rem!important;padding:var(--spacing-md) var(--tablet-spacing)!important;font-weight:600!important}.comparison-button{min-height:var(--tablet-touch-target);font-size:1rem;padding:var(--spacing-sm) var(--spacing-md);grid-column:1 / -1}.recording-controls #save-for-comparison{min-height:var(--tablet-button-height)!important;font-size:1.1rem!important;padding:var(--spacing-md) var(--tablet-spacing)!important;font-weight:600!important;grid-area:save-btn!important}.realtime-controls #realtime-save-comparison{min-height:var(--tablet-button-height);font-size:1.1rem;padding:var(--spacing-md) var(--tablet-spacing);font-weight:600}.charts-container{gap:var(--tablet-spacing)}.chart-wrapper{min-height:400px}.chart-wrapper canvas{max-height:350px}.mode-controls{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md)}.mode-label{padding:var(--spacing-md);min-height:var(--tablet-touch-target);text-align:center}}@media (min-width: 1024px) and (max-width: 1365px){.app-main{max-width:1200px;margin:0 auto;padding:var(--spacing-xl);display:grid;grid-template-rows:auto auto auto 1fr auto;gap:var(--spacing-xl);min-height:100vh}.app-header{padding:var(--spacing-lg) 0;text-align:center}.app-header h1{font-size:2.5rem;margin-bottom:var(--spacing-sm)}.mode-section{margin-bottom:0}.mode-controls{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);max-width:900px;margin:0 auto}.mode-label{padding:var(--spacing-xl);font-size:1.1rem;min-height:120px;display:flex;flex-direction:column;justify-content:center}.mode-description{font-size:.95rem;margin-top:var(--spacing-sm)}.recording-controls{display:grid;grid-template-columns:auto 1fr auto 1fr;grid-template-rows:auto auto;grid-template-areas:"duration-label duration-select fft-label fft-select" "record-btn record-btn save-btn save-btn";gap:var(--spacing-lg);align-items:center;padding:var(--spacing-lg);background:var(--surface-color);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm)}.recording-controls label[for=duration-select]{grid-area:duration-label;text-align:right;font-weight:600}.recording-controls #duration-select{grid-area:duration-select;min-height:48px;font-size:1rem}.recording-controls label[for=fft-resolution-select]{grid-area:fft-label;text-align:right;font-weight:600}.recording-controls #fft-resolution-select{grid-area:fft-select;min-height:48px;font-size:1rem}.recording-controls .record-button{grid-area:record-btn;font-size:1.2rem;min-height:56px;padding:var(--spacing-md) var(--spacing-xl)}.recording-controls #save-for-comparison{grid-area:save-btn;font-size:1.1rem;min-height:56px;padding:var(--spacing-md) var(--spacing-xl)}.realtime-controls{display:grid;grid-template-columns:auto 1fr auto auto;grid-template-rows:auto auto;grid-template-areas:"fft-label-rt fft-select-rt start-btn stop-btn" "comparison-btn-rt comparison-btn-rt comparison-btn-rt comparison-btn-rt";gap:var(--spacing-lg);align-items:center;padding:var(--spacing-lg);background:var(--surface-color);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-sm)}.realtime-controls label[for=fft-resolution-select-realtime]{grid-area:fft-label-rt;text-align:right;font-weight:600}.realtime-controls #fft-resolution-select-realtime{grid-area:fft-select-rt;min-height:48px;font-size:1rem}.realtime-controls .realtime-button.start{grid-area:start-btn;font-size:1.2rem;min-height:56px;min-width:140px}.realtime-controls .realtime-button.stop{grid-area:stop-btn;font-size:1.2rem;min-height:56px;min-width:140px}.realtime-controls .comparison-button{grid-area:comparison-btn-rt;font-size:1.1rem;min-height:56px;padding:var(--spacing-md) var(--spacing-xl)}.charts-container{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl);margin-top:0}.chart-wrapper{min-height:480px;background:var(--surface-color);border-radius:var(--border-radius-lg);padding:var(--spacing-lg);box-shadow:var(--shadow-sm);display:flex;flex-direction:column}.chart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-md);border-bottom:2px solid var(--border-color)}.chart-header h3{font-size:1.4rem;margin:0}.zoom-reset-btn{font-size:1rem;padding:var(--spacing-sm) var(--spacing-md);min-height:40px}.chart-wrapper canvas{flex:1;max-height:380px;min-height:350px}.chart-info{margin-top:var(--spacing-md);font-size:.95rem}.metrics-container{margin-top:var(--spacing-xl)}.metrics-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-lg)}.metric-item{padding:var(--spacing-lg);text-align:center;background:var(--surface-color);border-radius:var(--border-radius);box-shadow:var(--shadow-sm)}.metric-item span{font-size:1.8rem;display:block;margin-top:var(--spacing-sm)}.comparison-controls{display:flex;gap:var(--spacing-xl);justify-content:center;margin:var(--spacing-xl) 0}.export-button{font-size:1.1rem;min-height:56px;padding:var(--spacing-md) var(--spacing-xl)}}@media (orientation: landscape) and (max-width: 1023px){.app-header{padding:var(--spacing-md) var(--tablet-spacing)}.app-header h1{font-size:1.8rem}.charts-container{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg)}.chart-wrapper{min-height:300px}.chart-wrapper canvas{max-height:250px}}@media (orientation: portrait) and (min-width: 768px) and (max-width: 1023px){.charts-container{display:flex;flex-direction:column;gap:var(--spacing-lg)}.chart-wrapper{min-height:350px}.chart-wrapper canvas{max-height:300px}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){.chart-wrapper canvas{image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges}}@media (min-width: 1366px) and (max-width: 1599px){.app-main{max-width:1400px;margin:0 auto;padding:var(--spacing-2xl);display:grid;grid-template-rows:auto auto auto 1fr auto;gap:var(--spacing-2xl);min-height:100vh}.app-header h1{font-size:3rem}.mode-controls{max-width:1000px;gap:var(--spacing-2xl)}.mode-label{padding:var(--spacing-2xl);font-size:1.3rem;min-height:140px}.recording-controls{grid-template-columns:auto 2fr auto 2fr;padding:var(--spacing-xl);gap:var(--spacing-xl)}.realtime-controls{grid-template-columns:auto 2fr auto auto;padding:var(--spacing-xl);gap:var(--spacing-xl)}.chart-wrapper{min-height:550px;padding:var(--spacing-xl)}.chart-wrapper canvas{max-height:450px;min-height:420px}.chart-header h3{font-size:1.6rem}.metrics-grid{grid-template-columns:repeat(6,1fr);gap:var(--spacing-xl)}.metric-item span{font-size:2rem}}@media (min-width: 1024px) and (max-width: 1366px) and (-webkit-min-device-pixel-ratio: 2){.app-main{padding:var(--spacing-2xl)}.chart-wrapper{min-height:500px}.chart-wrapper canvas{max-height:450px}.mode-label{font-size:1.2rem;padding:var(--spacing-lg)}.record-button,.realtime-button{font-size:1.3rem;min-height:56px}}@media (min-width: 768px) and (max-width: 1599px) and (pointer: coarse){.chart-wrapper canvas{touch-action:pan-x pan-y pinch-zoom;cursor:grab}.chart-wrapper canvas:active{cursor:grabbing}.record-button,.realtime-button,.comparison-button,.export-button,.zoom-reset-btn{transition:all .15s ease;will-change:transform,box-shadow}.record-button:active,.realtime-button:active,.comparison-button:active,.export-button:active,.zoom-reset-btn:active{transform:scale(.95);box-shadow:0 2px 8px #00000026}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.mode-label input[type=radio]{width:20px;height:20px;margin-right:var(--spacing-md)}.debug-info,.metrics-container{-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.record-button:hover,.realtime-button:hover,.comparison-button:hover,.export-button:hover,.mode-label:hover{transform:none;box-shadow:none;background:initial;border-color:initial}.record-button:focus-visible,.realtime-button:focus-visible,.comparison-button:focus-visible,.export-button:focus-visible,select:focus-visible{outline:3px solid var(--primary-color);outline-offset:2px}}@media (min-width: 768px) and (max-width: 1023px) and (orientation: portrait){.metrics-grid{grid-template-columns:repeat(2,1fr);gap:var(--spacing-md)}.comparison-controls{flex-direction:column;gap:var(--spacing-md)}.chart-wrapper{min-height:300px}.chart-wrapper canvas{max-height:250px}}@media (min-width: 768px) and (max-width: 1023px) and (orientation: landscape){.app-main{padding:var(--spacing-md) var(--spacing-lg)}.charts-container{grid-template-columns:1fr 1fr;gap:var(--spacing-lg)}.metrics-grid{grid-template-columns:repeat(4,1fr)}.mode-controls{grid-template-columns:1fr 1fr;gap:var(--spacing-lg)}}@media (min-width: 768px) and (max-width: 1599px){body{font-size:16px;line-height:1.6}.app-header h1{letter-spacing:-.02em;line-height:1.2}.app-header p{font-size:1.1rem;max-width:600px;margin:0 auto}.chart-info p{font-size:1rem;line-height:1.5;color:var(--text-color)}.marker-info{font-size:1rem;padding:var(--spacing-md);background:#3b82f61a;border-radius:var(--border-radius);border:2px solid var(--primary-color)}label{font-size:1rem;font-weight:600;color:var(--text-color)}.recording-status,.realtime-status{font-size:1rem;padding:var(--spacing-lg);text-align:center;border-radius:var(--border-radius);margin-top:var(--spacing-lg)}.realtime-status.active{background:#22c55e1a;color:#059669;border:2px solid #10b981;font-weight:600}.debug-info{font-size:.95rem;line-height:1.5}.metric-item{border:1px solid var(--border-color)}.metric-item .metric-label{font-size:.95rem;font-weight:600;color:var(--text-muted)}.metric-item span{font-weight:700;color:var(--primary-color);text-shadow:0 1px 2px rgba(0,0,0,.1)}}@media (prefers-contrast: high) and (min-width: 768px){.chart-wrapper{border:2px solid var(--text-color)}.record-button,.realtime-button,.comparison-button,.export-button{border:2px solid currentColor;font-weight:700}.mode-label{border-width:3px}.mode-label:has(input[type=radio]:checked){border-width:4px;background:var(--primary-color);color:#fff}}@media (prefers-reduced-motion: reduce) and (min-width: 768px){.record-button,.realtime-button,.comparison-button,.export-button,.mode-label,.chart-wrapper canvas{transition:none;animation:none}.record-button:active,.realtime-button:active,.comparison-button:active,.export-button:active{transform:none}}#waveform-chart,#frequency-chart{touch-action:pan-x pinch-zoom!important;cursor:grab!important;transition:cursor .2s ease,transform .15s ease!important;-webkit-touch-callout:none!important;-webkit-user-select:none!important;-khtml-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important;-webkit-tap-highlight-color:transparent!important}:is(#waveform-chart,#frequency-chart):active{cursor:grabbing!important}.chart-wrapper{overflow:hidden!important;-webkit-overflow-scrolling:touch!important;pointer-events:auto!important}@media (max-width: 1024px) and (pointer: coarse){.chart-wrapper{padding:var(--spacing-lg) var(--spacing-md)!important}}#comparison-charts .chart-container{touch-action:pan-x pinch-zoom!important}@media (max-width: 1024px) and (pointer: coarse){#waveform-chart,#frequency-chart{min-height:280px!important;image-rendering:-webkit-optimize-contrast!important;image-rendering:crisp-edges!important}.chart-wrapper{min-height:350px!important;padding:var(--spacing-md) var(--spacing-xs)!important;margin:var(--spacing-sm) 0!important}.chart-header{padding:var(--spacing-md) 0!important;margin-bottom:var(--spacing-lg)!important}.zoom-reset-btn{min-height:44px!important;min-width:120px!important;font-size:1rem!important;padding:var(--spacing-sm) var(--spacing-md)!important;transition:all .15s ease!important}.zoom-reset-btn:active{transform:scale(.95)!important;box-shadow:0 2px 8px #00000026!important}}@media (min-width: 1024px) and (max-width: 1366px) and (pointer: coarse){#waveform-chart,#frequency-chart{min-height:320px!important}.chart-wrapper{min-height:400px!important}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){#waveform-chart,#frequency-chart{image-rendering:-webkit-optimize-contrast!important;image-rendering:pixelated!important}}@keyframes touch-feedback{0%{transform:scale(1)}50%{transform:scale(.98)}to{transform:scale(1)}}.chart-wrapper.long-press-detected{animation:touch-feedback .3s ease-in-out!important}.chart-wrapper.pinch-zooming{transform:scale(.98)!important;transition:transform .1s ease!important}@media (max-width: 1024px) and (pointer: coarse){.chart-info:after{content:"👆 タップ: マーカー設置 | 🤏 ピンチ: ズーム | 👆長押し: リセット";display:block;font-size:.75rem;color:var(--text-muted);margin-top:var(--spacing-xs);text-align:center;font-style:italic}.chart-wrapper[data-chart=waveform] .chart-info:after{content:"🤏 ピンチ: ズーム | ↔️ パン: 移動 | 👆長押し: リセット"}}@media (prefers-reduced-motion: reduce) and (max-width: 1024px){#waveform-chart,#frequency-chart,.chart-wrapper,.zoom-reset-btn{transition:none!important;animation:none!important}.chart-wrapper.long-press-detected,.chart-wrapper.pinch-zooming{transform:none!important;animation:none!important}}@media (pointer: coarse){button:active,.btn:active{transform:scale(.95)!important;transition:transform .1s ease!important;background-color:var(--primary-color-hover, #2563eb)!important}select:focus{outline:3px solid var(--primary-color)!important;outline-offset:2px!important;box-shadow:0 0 0 6px #3b82f61a!important}.chart-container canvas{cursor:pointer!important;touch-action:pan-x pinch-zoom!important}.chart-container{position:relative!important;overflow:hidden!important}.app-main:before{content:"← スワイプでモード切り替え →";position:absolute;top:10px;left:50%;transform:translate(-50%);background:#000000b3;color:#fff;padding:5px 15px;border-radius:15px;font-size:12px;opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:1000}.app-main:hover:before{opacity:1}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){.chart-container canvas{image-rendering:-webkit-optimize-contrast!important;image-rendering:crisp-edges!important}svg,img{image-rendering:-webkit-optimize-contrast!important;image-rendering:crisp-edges!important}}.low-power-mode *,.low-power-mode *:before,.low-power-mode *:after{animation-duration:0s!important;animation-delay:0s!important;transition-duration:0s!important;transition-delay:0s!important}.low-power-mode .card,.low-power-mode .btn,.low-power-mode select{box-shadow:none!important;border-radius:4px!important}.low-power-mode .chart-container{background:var(--background-color)!important}:fullscreen{background:var(--background-color)!important}:fullscreen .app-main{max-width:none!important;padding:10px!important}:fullscreen .header{font-size:1.8rem!important}:fullscreen .chart-container{height:45vh!important}@media (pointer: coarse){::-webkit-scrollbar{width:12px;height:12px}::-webkit-scrollbar-track{background:var(--background-color);border-radius:6px}::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:6px;border:2px solid var(--background-color)}::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}*{scrollbar-width:thick;scrollbar-color:var(--border-color) var(--background-color)}}@media (prefers-color-scheme: dark) and (pointer: coarse){button:active,.btn:active{background-color:#3b82f6cc!important;box-shadow:0 0 20px #3b82f64d!important}.app-main:before{background:#ffffffe6;color:#000}}@supports (vibrate: 10ms){button:active{box-shadow:0 0 15px #3b82f680!important}}@supports (-webkit-touch-callout: none){.chart-container canvas{-webkit-touch-callout:none!important;-webkit-user-select:none!important;user-select:none!important}body{-webkit-overflow-scrolling:touch;overscroll-behavior:contain}}@media screen and (max-device-width: 1599px) and (-webkit-min-device-pixel-ratio: 1){.chart-container{will-change:transform}button,.btn{-webkit-tap-highlight-color:rgba(59,130,246,.2)}}
